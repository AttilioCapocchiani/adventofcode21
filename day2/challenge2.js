console.log(Object.entries((data = require("fs").readFileSync("input.txt", "utf8")).split("\n").map(r => r.split(" ")).reduce((acc, curr) => ({ h: curr[0] === "forward" ? acc.h + parseInt(curr[1]) : acc.h, aim: curr[0] === "up" ? acc.aim - parseInt(curr[1]) : curr[0] === "down" ? acc.aim + parseInt(curr[1]) : acc.aim, v: curr[0] === "forward" ? acc.v + acc.aim * parseInt(curr[1]) : acc.v}),{ h: 0, aim: 0, v: 0 })).filter(([k, v]) => k !== 'aim').reduce((a, b) => a * b[1], 1))